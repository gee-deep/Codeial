<link rel="stylesheet" href="/css/home.css">
<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>

<script src="https://use.fontawesome.com/b327d2b014.js"></script>

<% if(locals.user){ %>
    <%- include('_postform.ejs') -%>
<% } %>
<div>
    <h1> Recent POST</h1>
</div>
<section id="posts">
    <% for (let post of posts) {%>
        <div class="post ">
                <p class="post description"> 
                    <b><i><%= post.user.name %></i></b>  : <%= post.content %> 
                    <% if((locals.user) && (locals.user.id === post.user.id)){ %>
                    <a href="/post/delete/<%= post.id %>"><i class="fas fa-minus-circle"></i></a>
                        <% } %>
                </p>
                <% if(locals.user) { %>
                    <div class="post-comment">
                        <form action="/comment/create" method="post">
                            <input type="text" name="comment" placeholder="Enter comment" required>
                            <input type="hidden" name="post" value="<%= post._id%>">
                            <input type="submit" value="Comment">
                        
                        </form>

                    </div>
                <%  }  %>
                <div class="post-comment-<%= post._id%>">
                    <% for (comment of post.comments) { %>
                    
                        <p><i><b><%= comment.user.name %></b>: </b></i><%= comment.comment %></p>
                    
                    <%  } %>
                </div>
        </div>
    <% } %>
</section>